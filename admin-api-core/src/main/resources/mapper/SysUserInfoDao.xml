<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.soft2242.one.system.dao.SysUserInfoDao">

    <update id="recordLastLoginTime">
        update sys_admin_info
        set last_login_time = #{lastLoginTime}
        where admin_id = #{id}
    </update>


    <select id="getByAdminId" resultType="com.soft2242.one.system.entity.SysUserInfoEntity">
        select *
        from sys_admin t1,
             sys_admin_info t2
        where t1.id = t2.admin_id
          and t1.id = #{id}
    </select>


    <select id="getList" resultType="com.soft2242.one.system.vo.SysUserVO">
        select t1.username,t2.real_name,t2.gender,t1.phone,t2.email,t1.create_time,t1.account_status
        from sys_admin t1,sys_admin_info t2
        where
        t1.id = t2.admin_id and
        t1.deleted = 0 and t2.deleted = 0
        <if test="username != null and username.trim() != ''">
            and t1.username = #{username}
        </if>
        <if test="phone != null and phone.trim() != ''">
            and t1.phone = #{phone}
        </if>
        <if test="gender != null">
            and t2.gender = #{gender}
        </if>
    </select>
</mapper>